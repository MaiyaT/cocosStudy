{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BoxItem",
    "require",
    "BoxState",
    "BoxType",
    "BoxShowType",
    "Game_State",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "speed",
    "speedMax",
    "acc_speed",
    "default",
    "tooltop",
    "boxItem",
    "type",
    "visible",
    "_showType",
    "K_Normal",
    "showType",
    "get",
    "set",
    "value",
    "select_item",
    "active",
    "K_Select",
    "K_SkillAround",
    "K_SkillColor",
    "K_SkillRank",
    "K_SkillRaw",
    "_state_b",
    "ENormal",
    "state_b",
    "currentSpeed",
    "animation",
    "getComponent",
    "Animation",
    "EFalling",
    "EFalled",
    "play",
    "EDestroy",
    "panel",
    "find",
    "gamestate",
    "Start",
    "boxDrop_destroy",
    "statics",
    "init",
    "node",
    "getChildByName",
    "titleShow",
    "unuse",
    "console",
    "log",
    "y",
    "reuse",
    "onLoad",
    "initBoxItem",
    "click_action",
    "Play",
    "color_type",
    "TypeCount",
    "rank",
    "row",
    "eliminate",
    "click_item",
    "box_destroy",
    "opacity",
    "resetOriginPos",
    "x",
    "begin_x",
    "begin_y",
    "color",
    "color_show",
    "boxSpeciallyShow",
    "end_y",
    "Blank",
    "update",
    "dt",
    "box_bottom",
    "height",
    "speed_n",
    "s",
    "Math",
    "min",
    "ani_point",
    "length",
    "last_point",
    "undefined",
    "isleft",
    "shift",
    "YHDebug",
    "Label",
    "string",
    "White",
    "YELLOW",
    "Color",
    "BLACK",
    "WHITE"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "\r\nvar BoxItem = require(\"BoxItem\");\r\n\r\nvar BoxState = require(\"States\").BoxState;\r\nvar BoxType = require(\"States\").BoxType;\r\nvar BoxShowType = require(\"States\").BoxShowType;\r\nvar Game_State = require(\"States\").Game_State;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n        speed:0,\r\n\r\n        speedMax:800,\r\n\r\n        acc_speed:{\r\n            default:9.8,\r\n            tooltop:\"加速度\"\r\n        },\r\n\r\n        boxItem:{\r\n            default:null,\r\n            type:BoxItem,\r\n            visible:false,\r\n        },\r\n\r\n\r\n        _showType:{\r\n            default:BoxShowType.K_Normal,\r\n            type:BoxShowType\r\n        },\r\n\r\n        showType:{\r\n\r\n            get:function () {\r\n                return this._showType;\r\n            },\r\n\r\n            set:function (value) {\r\n\r\n                switch (value) {\r\n                    case BoxShowType.K_Normal:\r\n                        this.select_item.active = false;\r\n\r\n                        break;\r\n\r\n                    case BoxShowType.K_Select:\r\n                        this.select_item.active = true;\r\n\r\n                        break;\r\n\r\n                    case BoxShowType.K_SkillAround:\r\n\r\n\r\n                        break;\r\n\r\n                    case BoxShowType.K_SkillColor:\r\n\r\n\r\n                        break;\r\n\r\n                    case BoxShowType.K_SkillRank:\r\n\r\n\r\n\r\n                        break;\r\n\r\n                    case BoxShowType.K_SkillRaw:\r\n\r\n                        break;\r\n\r\n                }\r\n\r\n            },\r\n        },\r\n\r\n\r\n\r\n        _state_b:{\r\n            default:BoxState.ENormal,\r\n            type:BoxState,\r\n            // visible:false\r\n        },\r\n\r\n        state_b:{\r\n\r\n            get:function () {\r\n                return this._state_b;\r\n            },\r\n\r\n            set:function (value) {\r\n\r\n                if(this._state_b !== value){\r\n\r\n                    this._state_b = value;\r\n\r\n                    this.currentSpeed = this.speed;\r\n\r\n                    let animation = this.getComponent(cc.Animation);\r\n\r\n                    switch (value) {\r\n                        case BoxState.ENormal:\r\n\r\n                            break;\r\n\r\n                        case BoxState.EFalling:\r\n\r\n\r\n                            break;\r\n\r\n                        case BoxState.EFalled:\r\n                            animation.play(\"ani_box\");\r\n\r\n                            break;\r\n                        case BoxState.EDestroy:\r\n                            // console.log(\"摧毁吹asd\");\r\n\r\n                            // animation.play(\"ani_destroy\");\r\n\r\n                            let panel = cc.find(\"Game/Panel\").getComponent(\"BoxPanel\");\r\n                            if(panel.gamestate === Game_State.Start) {\r\n                                panel.boxDrop_destroy(this);\r\n                            }\r\n                            else {\r\n                                animation.play(\"ani_destroy\");\r\n                            }\r\n\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n            },\r\n\r\n            type:BoxState,\r\n\r\n            // tooltop:\"方块的状态\"\r\n        },\r\n\r\n    },\r\n\r\n    statics:{\r\n        BoxState:BoxState\r\n    },\r\n\r\n    init:function(){\r\n\r\n        this.select_item = this.node.getChildByName(\"sel\");\r\n        this.titleShow = this.node.getChildByName(\"Label\");\r\n\r\n        this.currentSpeed = 0;\r\n\r\n        this.state_b = BoxState.ENormal;\r\n        this.showType = BoxShowType.K_Normal;\r\n    },\r\n\r\n\r\n    unuse:function(){\r\n        console.log(\"xiaohui\");\r\n\r\n        this.state_b = BoxState.ENormal;\r\n        this.showType = BoxShowType.K_Normal;\r\n        this.node.y = -100000;\r\n\r\n    },\r\n\r\n    reuse:function(){\r\n        console.log(\"chongyong\");\r\n\r\n        this.state_b = BoxState.ENormal;\r\n        this.showType = BoxShowType.K_Normal;\r\n    },\r\n\r\n\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n        // this.click_add();\r\n        // this.speed_x = 20;\r\n        \r\n    },\r\n\r\n    initBoxItem:function(){\r\n        if(!this.boxItem){\r\n            this.boxItem = new BoxItem();    \r\n        }\r\n    },\r\n\r\n    click_action:function(){\r\n        /*\r\n        只有再play状态下才能点击\r\n        */\r\n        let panel = cc.find(\"Game/Panel\").getComponent(\"BoxPanel\");\r\n        if(panel.gamestate === Game_State.Play &&\r\n            this.boxItem.color_type < BoxType.TypeCount) {\r\n\r\n            console.log(\"点击了   \"+\"rank=\"+this.boxItem.rank+\"row=\"+this.boxItem.row);\r\n\r\n            let eliminate = cc.find(\"Game/Eliminate\").getComponent(\"Eliminate\");\r\n            eliminate.click_item(this);\r\n        }\r\n    },\r\n\r\n\r\n\r\n    box_destroy:function () {\r\n\r\n        //动画结束之后的回调\r\n        this.node.opacity = 255;\r\n\r\n        console.log(\"摧毁动画完成\");\r\n\r\n        let panel = cc.find(\"Game/Panel\").getComponent(\"BoxPanel\");\r\n\r\n        panel.boxDrop_destroy(this);\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n    resetOriginPos:function(){\r\n\r\n        this.node.x = this.boxItem.begin_x;\r\n        this.node.y = this.boxItem.begin_y;\r\n\r\n        this.node.color = this.boxItem.color_show;\r\n\r\n        this.node.opacity = 255;\r\n    },\r\n\r\n\r\n    boxSpeciallyShow:function (type) {\r\n\r\n        this.node.x = this.boxItem.begin_x;\r\n        this.node.y = this.boxItem.end_y;\r\n\r\n        this.boxItem.color_type = type;\r\n        this.node.color = this.boxItem.color_show;\r\n\r\n        if(type === BoxType.Blank){\r\n            this.node.opacity = 10;\r\n        }\r\n    },\r\n\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n\r\n\r\n        //如果是正在掉落的 刷新endy 的坐标\r\n        // if(this.state_b === BoxState.EFalling ||\r\n        //     this.state_b === BoxState.EDestroy){\r\n        if(this.state_b === BoxState.EFalling){\r\n\r\n            let box_bottom = this.node.y + this.node.height * 0.5;\r\n\r\n            if (box_bottom > this.boxItem.end_y) {\r\n                //加速度掉落\r\n\r\n                let speed_n = this.currentSpeed + this.acc_speed*dt;\r\n                let s = (speed_n + this.currentSpeed )*0.5 * dt;\r\n\r\n                speed_n = Math.min(speed_n,this.speedMax);\r\n                this.currentSpeed = speed_n;\r\n\r\n                this.node.y -= s;\r\n            }\r\n\r\n            if (this.node.y <= this.boxItem.end_y) {\r\n\r\n                /**\r\n                 * 掉落到指定位置的时候弹动一下\r\n                 */\r\n                this.node.y = this.boxItem.end_y;\r\n\r\n                if(this.state_b === BoxState.EFalling){\r\n                    this.state_b = BoxState.EFalled;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if(this.boxItem.ani_point.length > 0){\r\n\r\n            // console.log(\"需要做偏移操作 判断\");\r\n            // let point_a = this.boxItem.ani_point\r\n\r\n            //判断这个位置的y 需要在的x的位置\r\n            // let points = this.boxItem.ani_point.filter(function(elem){\r\n            //     return this.node.y < elem.y;\r\n            // }.bind(this));\r\n\r\n            let last_point = this.boxItem.ani_point[0];\r\n\r\n            if(last_point !== undefined &&\r\n                this.node.x !== last_point.x &&\r\n                this.node.y < last_point.y){\r\n\r\n                // this.node.x = last_point.x;\r\n                // this.boxItem.ani_point.shift();//删除第一个元素\r\n\r\n                if(this.boxItem.rank === 6 && this.boxItem.row === 1){\r\n                    console.log(\"这个位置异常\" + this.boxItem.ani_point);\r\n\r\n                    if(last_point.isleft){\r\n                        //左边的递减\r\n                        this.node.x = this.node.x - this.speed*0.5;\r\n                        if(this.node.x <= last_point.x){\r\n                            this.node.x = last_point.x;\r\n                            this.boxItem.ani_point.shift();//删除第一个元素\r\n                            console.log(\"=======移除\");\r\n                        }\r\n                    }else {\r\n                        //右边的递增\r\n                        this.node.x = this.node.x + this.speed*0.5;\r\n                        if(this.node.x >= last_point.x){\r\n                            this.node.x = last_point.x;\r\n                            this.boxItem.ani_point.shift();//删除第一个元素\r\n                            console.log(\"=======移除\");\r\n                        }\r\n                    }\r\n\r\n                }else {\r\n\r\n                    if(last_point.isleft){\r\n                        //左边的递减\r\n                        this.node.x = this.node.x - this.speed*0.5;\r\n                        if(this.node.x <= last_point.x){\r\n                            this.node.x = last_point.x;\r\n                            this.boxItem.ani_point.shift();//删除第一个元素\r\n                            console.log(\"=======移除\");\r\n                        }\r\n                    }else {\r\n                        //右边的递增\r\n                        this.node.x = this.node.x + this.speed*0.5;\r\n                        if(this.node.x >= last_point.x){\r\n                            this.node.x = last_point.x;\r\n                            this.boxItem.ani_point.shift();//删除第一个元素\r\n                            console.log(\"=======移除\");\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            // console.log(\"====\" + last_point);\r\n        }\r\n\r\n\r\n        if(YHDebug){\r\n            this.titleShow.active = true;\r\n            this.titleShow.getComponent(cc.Label).string = this.boxItem.rank + \"_\" + this.boxItem.row;\r\n            if(this.boxItem.color_type === BoxType.White ||\r\n                this.boxItem.color_type === BoxType.YELLOW){\r\n                this.titleShow.getComponent(cc.Label).node.color = cc.Color.BLACK;\r\n            }else {\r\n                this.titleShow.getComponent(cc.Label).node.color = cc.Color.WHITE;\r\n            }\r\n\r\n        }else {\r\n            this.titleShow.active = false;\r\n        }\r\n\r\n        // if (this.node.x > this.boxItem.begin_x) {\r\n        //     this.node.x -= this.speed * dt;\r\n        // }\r\n        //\r\n        // if (this.node.x < this.boxItem.begin_x) {\r\n        //     this.node.x = this.boxItem.begin_x;\r\n        // }\r\n    },\r\n});\r\n\r\n"
  ]
}